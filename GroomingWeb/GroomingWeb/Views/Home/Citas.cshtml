@{
    ViewData["Title"] = "Citas";
}

<div class="container my-5">
    <h1 class="mb-3">Citas</h1>
    <p class="fs-5 mb-4">
        Selecciona el día y la hora disponible dentro de nuestro horario de atención.
    </p>

    <!-- Contenedor donde iremos a poner el calendario (solo si hay sesión) -->
    <div id="calendarWrap"></div>

    <div class="mt-4">
        <h5 class="mb-2">Horario de atención</h5>
        <ul class="fs-5">
            <li><strong>Martes a Viernes:</strong> 10:00 a.m. – 6:00 p.m.</li>
            <li><strong>Sábados:</strong> 8:00 a.m. – 5:30 p.m.</li>
        </ul>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const wrap = document.getElementById("calendarWrap");

            firebase.auth().onAuthStateChanged(user => {
                if (!user) {
                    // No hay sesión
                    requireLogin("Inicia sesión para sacar una cita.");
                    wrap.innerHTML = "";
                    return;
                }

                //sí hay sesión: cargamos el calendario
                wrap.innerHTML = `
                    <div class="ratio ratio-16x9 rounded shadow">
                        <iframe src="https://calendar.google.com/calendar/appointments/schedules/AcZssZ0HE07EzQggpQE42ydaV7-kBHaJCvWlCXOtt0BRh_SSKSvsHH_k8coIIq2KBAxyr8m_0-tcrTLC?gv=true"
                                style="border: 0" width="100%" height="600" frameborder="0"></iframe>
                    </div>
                `;
            });
        });
    </script>
}

